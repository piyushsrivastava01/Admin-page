<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
  <!-- Left: Form -->
  <div>
    <h2 class="text-lg font-semibold text-slate-900 mb-4">Role Assignment</h2>
    <p class="text-xs text-slate-500 mb-4">Assign roles and permissions to users</p>

    <div class="space-y-4">
      <div>
        <label class="block text-xs font-medium text-slate-700 mb-1">Select User</label>
        <select
          [(ngModel)]="selectedUserId"
          class="w-full px-3 py-2 border border-slate-200 rounded-xl text-xs bg-white"
        >
          <option [ngValue]="null">Choose a user</option>
          <option *ngFor="let u of users" [ngValue]="u.id">
            {{ u.name }} ({{ u.email }})
          </option>
        </select>
      </div>

      <div>
        <label class="block text-xs font-medium text-slate-700 mb-1">Assign Role</label>
        <select
          [(ngModel)]="selectedRole"
          class="w-full px-3 py-2 border border-slate-200 rounded-xl text-xs bg-white"
        >
          <option value="">Select role</option>
          <option>Admin</option>
          <option>HR</option>
          <option>Facilitator</option>
          <option>Trainee</option>
          <option>Manager</option>
        </select>
      </div>

      <div>
        <p class="text-xs font-medium text-slate-700 mb-2">Permissions</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs">
          <label
            *ngFor="let p of permissionOptions"
            class="flex items-center gap-2 px-3 py-2 rounded-xl border border-slate-200 cursor-pointer"
          >
            <input
              type="checkbox"
              [checked]="permissions.includes(p)"
              (change)="togglePermission(p)"
              class="accent-sky-600"
            />
            <span>{{ p }}</span>
          </label>
        </div>
      </div>

      <button
        (click)="save()"
        class="mt-4 w-full md:w-auto px-6 py-2 rounded-xl bg-sky-600 text-white text-xs font-semibold hover:bg-sky-700"
      >
        Save Changes
      </button>
    </div>
  </div>

  <!-- Right: Role overview -->
  <div>
    <h2 class="text-lg font-semibold text-slate-900 mb-4">Role Overview</h2>
    <p class="text-xs text-slate-500 mb-4">Current role distribution</p>

    <div class="space-y-3 text-xs">
      <div *ngFor="let item of summary">
        <div class="flex justify-between mb-1">
          <span>{{ item.role }} {{ item.count }} users</span>
          <span>{{ item.percentage }}%</span>
        </div>
        <div class="h-2 rounded-full bg-slate-100 overflow-hidden">
          <div
            class="h-2 rounded-full"
            [ngClass]="{
              'bg-rose-500': item.role === 'Admin',
              'bg-violet-500': item.role === 'HR',
              'bg-indigo-500': item.role === 'Facilitator',
              'bg-sky-500': item.role === 'Trainee',
              'bg-amber-500': item.role === 'Manager'
            }"
            [style.width.%]="item.percentage"
          ></div>
        </div>
      </div>
    </div>
  </div>
</div>
